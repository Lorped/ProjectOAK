#Category only allowed for GER

special_projects = {

	GER_dismantle_maginot = {

		icon = generic_construction

		available = {
			has_war = yes
			any_country = {
				OR = {
					tag = GER
					is_in_faction_with = GER
				}
				controls_state = 28
				if = {
					limit = {
						FRA = { has_completed_focus = FRA_extend_the_maginot_line }
					}
					controls_state = 18
					controls_state = 29
				}
			}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 50
		}

		visible = {
			original_tag = GER 
		}

		days_remove = 180

		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			28 = {
				set_building_level = {
					type = bunker
					level = 2
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 2
					}
				}
			}
			if = {
				limit = {
					FRA = { has_completed_focus = FRA_extend_the_maginot_line }
				}
				18 = {
					set_building_level = {
						type = bunker
						level = 2
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 2
						}
					}
				}
				29 = {
					set_building_level = {
						type = bunker
						level = 2
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 2
						}
					}
				}
			}
		}
		complete_effect = {
			if = {
				limit = { FRA = { has_completed_focus = FRA_extend_the_maginot_line } }
				add_timed_idea = { idea = GER_dismantle_maginot days = 270 }
				else = {
					add_timed_idea = { idea = GER_dismantle_maginot days = 180 }
				}
			}
		}
	}	

	GER_westwall = {

		icon = generic_construction

		allowed = {
		   tag = GER
		}
		available = {
			42 = { is_demilitarized_zone = no }
			51 = { is_demilitarized_zone = no }
			num_of_civilian_factories_available_for_projects > 2
		}

		cost = 25

		fire_only_once = yes

		ai_will_do = {
			factor = 5
		}

		days_remove = 70

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			custom_effect_tooltip = GER_westwall_tt
			custom_effect_tooltip = GER_westwall_2_tt
			hidden_effect = {
				50 = {
					add_building_construction = {
						type = bunker
						province = 11640
						level = 5
					}
					add_building_construction = {
						type = bunker
						province = 6712
						level = 5
					}
					add_building_construction = {
						type = bunker
						province = 6542
						level = 5
					}
					add_building_construction = {
						type = bunker
						province = 3530
						level = 5
					}
				}		
				42 = {	
					add_building_construction = {
						type = bunker
						province = 3558
						level = 5
					}		
					add_building_construction = {
						type = bunker
						province = 563
						level = 5
					}
					add_building_construction = {
						type = bunker
						province = 11531
						level = 5
					}
					add_building_construction = {
						type = bunker
						province = 9575
						level = 5
					}
				}
			}
		}
	}

	GER_africa_korps = {
		
		cost = 25
		
		
		allowed = {
		   tag = GER
		}
		
		available = {
			has_war_with = ENG
			ITA = { has_war_with = ENG }
			is_in_faction_with = ITA
			ITA = { has_full_control_of_state = 448 }
				or = {
					ENG = { num_occupied_states > 3 } #needs to account for ETHIOPIA i think - Xen
					date > 1941.1.1
				}
		}

		visible = {
			has_war_with = ENG
			ITA = { has_war_with = ENG }
		}
        
		fire_only_once = yes
		
		days_remove = 35

		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			custom_effect_tooltip = GER_afrikakorps_tt
			hidden_effect = {
				GER = {
				country_event = germany.233
				}
			}
		}
	}

	GER_prepare_to_invade_the_ussr = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		cost = 25 
		
		allowed = {
		   tag = GER
		}

		available = {	
			num_of_civilian_factories_available_for_projects > 15
			has_tech = construction3				
				POL = { has_capitulated = yes }
				OR = {
					GER = { controls_state = 73 }
					any_other_country = {
						is_in_faction_with = GER
						controls_state = 73
					}
				}
				OR = {
					GER = { controls_state = 76 }
					any_other_country = {
						is_in_faction_with = GER
						controls_state = 76
					}
				}
				OR = {
					GER = { controls_state = 79 }
					any_other_country = {
						is_in_faction_with = GER
						controls_state = 79
					}
				}
		}

		days_remove = 70

		modifier = {
			civilian_factory_use = 15			
		}

		ai_will_do = {
			factor = 10
		}

		remove_effect = {
			custom_effect_tooltip = GER_prepare_to_invade_the_ussr_tt
			custom_effect_tooltip = GER_prepare_to_invade_the_ussr_2_tt
			hidden_effect = {
				188 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				5 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				92 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				98 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				10 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				88 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				90 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				73 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				76 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				79 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
						
					}
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
			}	
		}	
	}

	GER_plan_atlantikwall = {

		icon = generic_construction

		allowed = {
		   tag = GER
		}
		available = {
			has_tech = construction4
			num_of_civilian_factories_available_for_projects > 20
			country_exists = EFR
			OR = {
					GER = { controls_state = 6 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 6
				}
			}
			OR = {
					GER = { controls_state = 7 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 7
				}
			}
			OR = {
					GER = { controls_state = 36 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 36
				}
			}
			OR = {
					GER = { controls_state = 99 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 99
				}
			}
			OR = {
				OR = {
					GER = { controls_state = 142 }
						any_other_country = {
						is_in_faction_with = GER
						controls_state = 142
					}
				}
				is_in_faction_with = NOR
			}
		}

		cost = 25

		fire_only_once = yes

		ai_will_do = {
			factor = 5
		}

		days_remove = 200

		modifier = {
			civilian_factory_use = 30
		}

		remove_effect = {
			custom_effect_tooltip = GER_atlantikwall_tt
			custom_effect_tooltip = GER_atlantikwall_tt_2
			hidden_effect = {
				19 = {
					add_building_construction = {
						type = coastal_bunker
						province = 9737
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11565
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 6621
						level = 5
					}
				}
				23 = {
					add_building_construction = {
						type = coastal_bunker
						province = 6657
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 9597
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11600
						level = 5
					}
				}
				30 = {
					add_building_construction = {	
						type = coastal_bunker
						province = 11465
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11616
						level = 5
					}
				}
				14 = {
					add_building_construction = {
						type = coastal_bunker
						province = 9510
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 6536
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 542
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 3552
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 6572
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 9525
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11508
						level = 5
					}
				}
				15 = {
					add_building_construction = {
						type = coastal_bunker
						province = 9550
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 6449
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 3579
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11535
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 6599
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 9434
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 485
						level = 5
					}
				}
				29 = {
					add_building_construction = {
						type = coastal_bunker
						province = 11420
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 9500
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11548
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 575
						level = 5
					}
				}
				6 = {
					add_building_construction = {
						type = coastal_bunker
						province = 6446
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 6560
						level = 5
					}
				}
				7 = {
					add_building_construction = {
						type = coastal_bunker
						province = 480
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 9431
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 9498
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 3211
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 68
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 3314
						level = 5
					}
				}
				36 = {
					add_building_construction = {
						type = coastal_bunker
						province = 6336
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 9335
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11318
						level = 5
					}
				}
				56 = {
					add_building_construction = {
						type = coastal_bunker
						province = 11360
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 241
						level = 5
					}
				}
				59 = {
					add_building_construction = {
						type = coastal_bunker
						province = 374
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 6349
						level = 5
					}
				}
				58 = {
					add_building_construction = {
						type = coastal_bunker
						province = 3368
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 3231
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11366
						level = 5
					}
				}
				99 = {
					add_building_construction = {
						type = coastal_bunker
						province = 332
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 399
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 3206
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 316
						level = 5
					}
				}
				142 = {
					add_building_construction = {
						type = coastal_bunker
						province = 9296
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11367
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 6176
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 53
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 9296
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 11367
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 122
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 199
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 3090
						level = 5
					}
					add_building_construction = {
						type = coastal_bunker
						province = 188
						level = 5
					}
				}
				144 = {
					add_building_construction = {
						type = coastal_bunker
						province = 192
						level = 5
					}
					add_building_construction = {
						type = bunker
						province = 192
						level = 5
					}
				}
			}
		}
	}

	GER_ostwall = {

		icon = generic_construction

		
		allowed = {
		   tag = GER
		}
		available = {
			num_of_civilian_factories_available_for_projects > 20
			has_tech = construction3
				
				OR = {
					has_full_control_of_state = 191
					has_full_control_of_state = 209
					has_full_control_of_state = 210
					has_full_control_of_state = 207
					has_full_control_of_state = 206
					has_full_control_of_state = 204
					has_full_control_of_state = 194
					has_full_control_of_state = 202
					has_full_control_of_state = 203
					has_full_control_of_state = 226
					has_full_control_of_state = 200
				}
			
		}

		cost = 25

		fire_only_once = yes

		ai_will_do = {
			factor = 5
		}

		days_remove = 100

		modifier = {
			civilian_factory_use = 20
		}

		remove_effect = {
			custom_effect_tooltip = GER_ostwall_forts
			custom_effect_tooltip = GER_ostwall_forts_2
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 191 
					}
				}
				hidden_effect = {
					191 = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 4640
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 209
					}
				}
				hidden_effect = {
					209 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 415
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3310
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 210 
					}
				}
				hidden_effect = {
					210 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 3333
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11259
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 9386
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 207 
					}
				}
				hidden_effect = {
					207 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 323
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11241
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11220
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3331
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 206 
					}
				}
				hidden_effect = {
					206 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 9289
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3378
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 204 
					}
				}
				hidden_effect = {
					204 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 6373
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 194 
					}
				}
				hidden_effect = {
					194 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 6319
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 9249
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3507
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 202 
					}
				}
				hidden_effect = {
					202 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 9568
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3543
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 525
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3494
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 203 
					}
				}
				hidden_effect = {
					203 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 11454
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 488
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3468
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 6478
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 226 
					}
				}
				hidden_effect = {
					226 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 9433
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11437
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 200 
					}
				}
				hidden_effect = {
					200 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 11405
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 6596
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11700
							instant_build = yes
						}
					}
				}
			}
		}
	}
}


operations = {

    GER_operation_oak = {
        
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag =  GER
		}
		visible = {
			ITA = { has_idea = SAl_italian_civil_war }
		}
		available = {
			ITA = { has_idea = SAl_italian_civil_war }
		}
		cost = 10
		ai_will_do = {
			factor = 100
		}
		days_remove = 7

		remove_effect = {
			ITA = { country_event = salo.4 }
		}
	}

	GER_rape_italia = {
        
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag =  GER
		}
		visible = {
			ITA = { has_idea = SAl_italian_civil_war }
		}
		available = {
			ITA = { has_idea = SAl_italian_civil_war }
			ITA = { is_puppet_of = GER }
			ITA = {controls_state = 159}
			ITA = {controls_state = 158}
		}
		cost = 50

		ai_will_do = {
			factor = 100
		}

		days_remove = 30

		remove_effect = {
			159 = { #Milano
					remove_building = {
						type = arms_factory
						level = 10
					}
					remove_building = {
						type = industrial_complex
						level = 10
					}
				}
				158 = { #Torino
					remove_building = {
						type = arms_factory
						level = 5
					}
					remove_building = {
						type = industrial_complex
						level = 5
					}
				}
				65 = { 
				add_extra_state_shared_building_slots = 10
				add_building_construction = {
						type = arms_factory
						level = 5
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 5
						instant_build = yes
					}
				}	
				54 = { 
				add_extra_state_shared_building_slots = 20
				add_building_construction = {
						type = arms_factory
						level = 10
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 10
						instant_build = yes
					}
                }					
		}
	}
	
	GER_gustav_line = {
        
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag =  GER
		}
		visible = {
			has_war = yes
			ITA = { is_puppet_of = GER }		
		}
		available = {
			has_war = yes
			ITA = { is_puppet_of = GER }
		}
		cost = 10
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			2 = {
				add_building_construction = {
	             type = bunker
	             level = 3
	             instant_build = yes
	             province = 923
	            }
			}	
			157 = {
				add_building_construction = {
	             type = bunker
	             level = 3
	             instant_build = yes
	             province = 963
	            }
				add_building_construction = {
	             type = bunker
	             level = 3
	             instant_build = yes
	             province = 6831
	            }
			}
		}
	}

	GER_gothic_line = {
        
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag =  GER
		}
		visible = {
			has_war = yes
			ITA = { is_puppet_of = GER }		
		}
		available = {
			has_war = yes
			ITA = { is_puppet_of = GER }
		}
		cost = 10
		ai_will_do = {
			factor = 10
		}
		complete_effect = {
			162 = {
			add_building_construction = {
             type = bunker
             level = 2
             instant_build = yes
             province = 6973
            }
			add_building_construction = {
             type = bunker
             level = 2
             instant_build = yes
             province = 1616
            }
			add_building_construction = {
             type = bunker
             level = 2
             instant_build = yes
             province = 11889
            }
			add_building_construction = {
             type = bunker
             level = 2
             instant_build = yes
             province = 9879
            }
		}
		157 = {
	      add_building_construction = {
             type = bunker
             level = 2
             instant_build = yes
             province = 11861
            }
		   add_building_construction = {
             type = bunker
             level = 2
             instant_build = yes
             province = 923
            }	
		}
	 }
	}

	GER_barbarossa_mission = {

		icon = generic_operation

		allowed = {
			always = no
			#added through on_action
		}

		available = {
			219 = { is_controlled_by_ROOT_or_ally = yes }
			195 = { is_controlled_by_ROOT_or_ally = yes }
			202 = { is_controlled_by_ROOT_or_ally = yes }
			217 = { is_controlled_by_ROOT_or_ally = yes }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		activation = {

		}

		is_good = no

		complete_effect = {
			add_war_support = 0.05
			custom_effect_tooltip = barbarossa_mission_tt
		}

		timeout_effect = {
			
		}

		ai_will_do = {
			factor = 10
		}
	}

	summer_offensive_I_decision = { 
	
	
		allowed = {
		   tag = GER
		}
	    available = {
		has_war_with = SOV
		
		AND = { date > 1942.05.01 date < 1942.08.01 } 
		
		# german advance check
		SOV = { controls_state = 219 } # controls moscow 
		GER = { controls_state = 64 }
		OR = {
				GER = { controls_state = 16 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 16
				}
			}
			OR = {
				GER = { controls_state = 6 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 6
				}
			}
			OR = {
				GER = { controls_state = 7 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 7
				}
			}
		OR = {
				GER = { controls_state = 37 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 37
				}
			}
		OR = {
				GER = { controls_state = 10 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 10
				}
			}
		ITA = { controls_state = 2 }

		OR = {
			GER = { controls_state = 43 }
			any_other_country = {
			is_in_faction_with = GER
			controls_state = 43
			}
		}
		OR = {
			GER = { controls_state = 46 }
			any_other_country = {
			is_in_faction_with = GER
			controls_state = 46
			}
		}	
	}
    
	visible = {
        has_war_with = SOV
	    AND = { date > 1942.03.01 date < 1942.08.01 } 
	}

	icon = generic_scorched_earth

	cost = 0

	ai_will_do = {
		factor = 100
	}	

	fire_only_once = yes
	
	complete_effect = { 
		
	   	add_timed_idea = {
				idea = Blau_I
				days = 120
		}
		
		news_event = { hours = 20 id = news.3145 }
		set_country_flag = GERsummeroffensive1
     	}
    }
	
	summer_offensive_II_decision = { 
	
		allowed = {
		   tag = GER
		}
		available = {
		has_war_with = SOV
		
		AND = { date > 1943.05.01 date < 1943.08.01 }
		NOT = { has_idea = Blau_I }
		
		has_country_flag = GERsummeroffensive1
		# german advance check
		SOV = { controls_state = 219 } # controls moscow 
		GER = { controls_state = 64 }
		OR = {
				GER = { controls_state = 16 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 16
				}
			}
			OR = {
				GER = { controls_state = 6 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 6
				}
			}
			OR = {
				GER = { controls_state = 7 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 7
				}
			}
		OR = {
				GER = { controls_state = 37 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 37
				}
			}
		OR = {
				GER = { controls_state = 10 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 10
				}
			}
		ITA = { controls_state = 2 }
		OR = {
				GER = { controls_state = 43 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 43
				}
			}
		OR = {
				GER = { controls_state = 46 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 46
				}
			}	
		
		}
		visible = {
				has_war_with = SOV
		}
		icon = generic_scorched_earth

			cost = 0
			ai_will_do = {
				factor = 100
			}	
			fire_only_once = yes
		
		complete_effect = { 
			
			add_timed_idea = {
					idea = Blau_I
					days = 120
			}
			
			
			news_event = { hours = 20 id = news.3145 }
			set_country_flag = GERsummeroffensive2
			
		}
    }
	
	summer_offensive_III_decision = { 
	
		allowed = {
		   tag = GER
		}
	available = {
		has_war_with = SOV
		
		AND = { date > 1944.05.01 date < 1944.08.01 } 
		NOT = { has_idea = Blau_I }
		
		has_country_flag = GERsummeroffensive2
		# german advance check
		SOV = { controls_state = 219 } # controls moscow 
		GER = { controls_state = 64 }
		OR = {
				GER = { controls_state = 16 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 16
				}
			}
			OR = {
				GER = { controls_state = 6 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 6
				}
			}
			OR = {
				GER = { controls_state = 7 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 7
				}
			}
		OR = {
				GER = { controls_state = 37 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 37
				}
			}
		OR = {
				GER = { controls_state = 10 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 10
				}
			}
		OR = {
				GER = { controls_state = 43 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 43
				}
			}
		OR = {
				GER = { controls_state = 46 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 46
				}
			}	
	}

	visible = {
	        has_war_with = SOV
		    AND = { date > 1944.03.01 date < 1944.08.01 }
	}
	icon = generic_scorched_earth

		cost = 0
		ai_will_do = {
			factor = 100
		}	
		fire_only_once = yes
	
	complete_effect = { 
		
	   	add_timed_idea = {
				idea = Blau_I
				days = 120
		}
		
		news_event = { hours = 20 id = news.3145 }
		set_country_flag = GERsummeroffensive3
     }
    }
	
	summer_offensive_IV_decision = { 
	
		allowed = {
		   tag = GER
		}
		available = {
		has_war_with = SOV	
		AND = { date > 1945.05.01 date < 1945.08.01 }   
		NOT = { has_idea = Blau_I }
		
		has_country_flag = GERsummeroffensive3
		# german advance check
		SOV = { controls_state = 219 } # controls moscow 
		GER = { controls_state = 64 }
		OR = {
				GER = { controls_state = 16 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 16
				}
			}
			OR = {
				GER = { controls_state = 6 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 6
				}
			}
			OR = {
				GER = { controls_state = 7 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 7
				}
			}
		OR = {
				GER = { controls_state = 37 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 37
				}
			}
		OR = {
				GER = { controls_state = 10 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 10
				}
			}
		OR = {
				GER = { controls_state = 43 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 43
				}
			}
		OR = {
				GER = { controls_state = 46 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 46
				}
			}	
		}
    
	visible = {
	        has_war_with = SOV
		    AND = { date > 1945.03.01 date < 1945.08.01 } 
	}
	icon = generic_scorched_earth

		cost = 0
		ai_will_do = {
			factor = 100
		}	
		fire_only_once = yes
	
	complete_effect = { 
		
	   	add_timed_idea = {
				idea = Blau_I
				days = 120
		}
		
		news_event = { hours = 20 id = news.3145 }
		set_country_flag = GERsummeroffensive4
     }
    }
	
	summer_offensive_V_decision = { 
	
		allowed = {
		   tag = GER
		}
		available = {
		has_war_with = SOV
		
		AND = { date > 1946.05.01 date < 1946.08.01 }
		NOT = { has_idea = Blau_I }
		
		has_country_flag = GERsummeroffensive4
		# german advance check
		SOV = { controls_state = 219 } # controls moscow 
		GER = { controls_state = 64 }
		OR = {
				GER = { controls_state = 16 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 16
				}
			}
			OR = {
				GER = { controls_state = 6 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 6
				}
			}
			OR = {
				GER = { controls_state = 7 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 7
				}
			}
		OR = {
				GER = { controls_state = 37 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 37
				}
			}
		OR = {
				GER = { controls_state = 10 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 10
				}
			}
		OR = {
				GER = { controls_state = 43 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 43
				}
			}
		OR = {
				GER = { controls_state = 46 }
				any_other_country = {
				is_in_faction_with = GER
				controls_state = 46
				}
			}	
		}

		visible = {
				has_war_with = SOV
				AND = { date > 1946.03.01 date < 1946.08.01 }
		}
		icon = generic_scorched_earth

			cost = 0
			ai_will_do = {
				factor = 100
			}	
		fire_only_once = yes
	
		complete_effect = { 
			
			add_timed_idea = {
					idea = Blau_I
					days = 120
			}
			
			news_event = { hours = 20 id = news.3145 }
			set_country_flag = GERsummeroffensive5
		 }
    }
}

GER_case_anton_category = {

	GER_case_anton = {

		icon = generic_operation

		available = {
			has_government = fascism
			country_exists = EFR
			date > 1941.1.1
			USA = { has_war = yes }
		}

		cost = 25
		fire_only_once = yes

		visible = {
			has_government = fascism
			country_exists = EFR
		}
		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				ITA = { has_capitulated = yes }
			}
		}
		complete_effect = {
			custom_effect_tooltip = GER_case_anton_tt
			
		}
		days_remove = 70
		remove_effect = {
		  GER = {
            set_autonomy = { target = EFR autonomy_state = autonomy_reichsprotectorate }
            transfer_state = 26
            transfer_state = 21
            transfer_state = 22
            transfer_state = 31
            transfer_state = 25
            transfer_state = 20
            transfer_state = 32
            transfer_state = 33
            }
			ITA = { 
		    transfer_state = 735 
		    transfer_state = 1 
		    transfer_state = 21 
		    transfer_state = 32 
		    }
          EFR = {
          set_capital = 459
          }
		  EFR = { remove_ideas = { idea_EFR_neutrality } }
		  GER = { add_to_faction = EFR }
		}
	}
}

political_actions = {
}

foreign_politics = {

	GER_rhineland = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}	

		ai_will_do = {
			factor = 10
		}

		days_remove = 70

		remove_effect = {
			42 = { set_demilitarized_zone = no }
			51 = { set_demilitarized_zone = no }
			custom_effect_tooltip = GER_rhineland_ultimatum
			add_political_power = 200
			army_experience = 5
			add_named_threat = { threat = 3 name = GER_rhineland }
			if = {
				limit = { FRA = { is_puppet = no } }
				FRA = {
					country_event = { id = germany.60 }
					custom_effect_tooltip = may_provoke_hostility
				}
			}			
		}		
	}

	GER_anschluss = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		days_remove = 30

		ai_will_do = {
			factor = 10
		}

		
		allowed = {
		   tag = GER
		}
		available = {
			42 = { is_demilitarized_zone = no }
			51 = { is_demilitarized_zone = no }
			is_puppet = no
			or = {
			AND = { has_army_manpower = { size > 749999 } date > 1937.7.1 }
			date > 1938.4.1
		    }
			OR = { 
				is_ai = no
				date > 1938.4.1	  
			}
			NOT = { has_idea = rhineland_challenge_met }
		}


		days_remove = 70

		remove_effect = {
			add_political_power = 100
			if = {
				limit = {
					country_exists = AUS
					AUS = {
						has_civil_war = no
						OR = {
							owns_state = 4
							owns_state = 152
							owns_state = 153
						}
					}
				}
				AUS = {
					country_event = germany.28
				}				
			}
			if = {
				limit = {
					any_other_country = {
						original_tag = AUS
						has_civil_war = yes
						OR = {
							owns_state = 4
							owns_state = 152
							owns_state = 153
						}
					}
				}
				custom_effect_tooltip = germany.126.warning
				random_other_country = {
					limit = {
						original_tag = AUS
						OR = {
							has_government = fascism
							AND = {
								has_government = neutrality
								NOT = {
									any_other_country = {
										original_tag = AUS
										has_government = fascism
									}
								}
							}
							NOT = {
								any_other_country = {
									original_tag = AUS
									OR = {
										has_government = fascism
										has_government = neutrality
									}
								}
							}							
						}
					}
					country_event = { id = germany.126 days = 1 }
				}
				# REVISIT Add Czech claims, possibly
			}
			if = {
				limit = {
					4 = {
						owner = {
							NOT = {
								tag = AUS
							}
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				add_state_core = 4
			}
			if = {
				limit = {
					152 = {
						owner = {
							NOT = {
								tag = AUS
							}
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				add_state_core = 152
			}
			if = {
				limit = {
					153 = {
						owner = {
							NOT = {
								tag = AUS
							}
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				add_state_core = 153
			}
		}
	}

	GER_demand_sudetenland = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		allowed = {
		   tag = GER
		}

		days_remove = 70

		available = {
			owns_state = 4
			is_puppet = no
			has_army_manpower = { size > 949999 } #80 div	
            date > 1938.1.1			
			OR = { 
				is_ai = no
				 date > 1938.9.10	  
			}
			NOT = {
				AND = {
					CZE = { is_in_faction_with = GER }
					has_war = yes
				}
			}
		}

		ai_will_do = {
			factor = 10
		}

		remove_effect = {
			if =  {
				limit = {
					OR = {
						ENG = { exists = no }
						ENG = {
							is_subject = yes
						}
						has_war_with = ENG
						has_war_with = FRA
						AND = {
							CZE = { is_subject = yes }
							OR = {
								CZE = { 
									NOT = {
										is_puppet_of = HUN
									}
								}
								NOT = { has_dlc = "Death or Dishonor" }
							}
						}
						CZE = { has_war_with = ENG }
						CZE = { has_war_with = FRA }
						CZE = { is_in_faction_with = GER }
					}
					CZE = { controls_state = 69 }
				}
				if = {
					limit = {
						CZE = { is_subject = no }
					}
					CZE = {
						country_event = { id = germany.122 }
					}
					else = {
						CZE = {
							OVERLORD = { country_event = { id = germany.122 } }
						}
					}
				}
			}
			if = {
				limit = {
					has_dlc = "Death or Dishonor"
					CZE = { NOT = { is_in_faction_with = GER } } #in case AH is in faction with GER and dragged a subject CZE along.
					country_exists = HUN
					OR = {
						69 = { is_owned_by = HUN } #AH restored
						AND = {
							CZE = { is_subject_of = HUN }
							69 = { is_owned_by = CZE }
						}
					}
				}
				HUN = {
					country_event = germany.122
				}
			}
			if = {
				limit = {
					
					ENG = { exists = yes }
					ENG = { is_subject = no }
					NOT = { has_war_with = ENG }
					NOT = { has_war_with = FRA }
					CZE = { is_subject = no }
					CZE = { NOT = { is_in_faction_with = GER } }
					CZE = { NOT = { has_war_with = ENG } }
					CZE = { controls_state = 69 }
					
				}
				ENG = {
					country_event = germany.40
				}
				add_named_threat = { threat = 3 name = GER_demand_sudetenland_threat }
			}
			69 = {
				add_claim_by = GER
			}
			if = {
				limit = {
					NOT = { CZE = { controls_state = 69 } }
					NOT = {
						69 = { is_controlled_by = HUN }
					}
					69 = {
						controller = {
							NOT = { is_in_faction_with = GER }
						}
					}
				}
				add_named_threat = { threat = 3 name = GER_demand_sudetenland_threat }
				69 = {
					controller = {
						GER = {
							create_wargoal = {
								type = take_state_focus
								target = PREV
								generator = { 69 }
							}
						}
					}
				}
			}
		}
	}

	GER_first_vienna_award = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		
		allowed = {
		   tag = GER
		}
	

		available = {
			is_puppet = no
			owns_state = 69
			country_exists = HUN
		}

		days_remove = 15

		ai_will_do = {
			factor = 10
		}

		remove_effect = {
			add_political_power = 100
			HUN = {
				country_event = { id = germany.51 }
				add_opinion_modifier = { target = GER modifier = GER_first_vienna_award_GER }
			}
			every_other_country = {
				limit = { 
					is_faction_leader = yes
					NOT = { tag = GER }
				}
				reverse_add_opinion_modifier = { target = HUN modifier = GER_second_vienna_award_other }
			}
		}
	}

	GER_end_of_czechoslovakia = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		allowed = {
		   tag = GER
		}
		

		days_remove = 70

		available = { 
			owns_state = 69
			is_puppet = no
			or = {
				CZE = { is_puppet_of = GER }
				CZE = { is_in_faction_with = GER }
				has_army_manpower = { size > 949999 }
				date > 1939.3.16
			}
			OR = { 
				is_ai = no
				date > 1939.3.10	  
			}
			NOT = { has_war_with = CZE }
		}

		ai_will_do = {
			factor = 10
		}

		remove_effect = {
			if = {
				limit = { 
					country_exists = CZE 
					CZE = {
						NOT = {
							is_subject_of = HUN
						}
					}
				}
				set_global_flag = end_of_czechoslovakia
				CZE = { country_event = germany.53 }
			}
			if = {
				limit = { 
					OR = {
						CZE = {
							is_subject_of = HUN
						}
						HUN = {
							owns_state = 9#Prague - AH annexed CZE
						}
					}
				}
				add_state_claim = 9
				add_state_claim = 75
			}
			if = {
				limit = { NOT = { country_exists = CZE } }
				country_event = { id = germany.55 hours = 6 }
			}
			add_named_threat = { threat = 5 name = GER_end_of_czechoslovakia }
			country_event = { days = 7 id = germany.2280 }
		}
	}

	GER_second_vienna_award = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		allowed = {
		   tag = GER
		}
		

		days_remove = 15

		available = {
			is_puppet = no
			has_army_manpower = { size > 999999 }
			has_capitulated = no
			has_country_flag = GER_the_end_of_czechoslovakia
			country_exists = HUN
			date > 1939.9.1
		}

		ai_will_do = {
			factor = 10
		}

		remove_effect = {
			add_political_power = 100
			if = {
				limit = {
					HUN = {
						is_friend_or_potential_friend_of_GER = yes
					}
					ROM = {
						controls_state = 76
						NOT = { has_war_with = HUN }
					}
				}
				country_event = { id = germany.20 }
			}
		}
	}

	GER_demand_memel = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		allowed = {
		   tag = GER
		}
		
		available = {
			is_puppet = no
			has_army_manpower = { size > 999999 }
			has_capitulated = no
			has_country_flag = GER_the_end_of_czechoslovakia
		}

		ai_will_do = {
			factor = 10
		}

		days_remove = 35

		remove_effect = {
			188 = { add_core_of = GER }
			86 = { add_claim_by = GER }
			add_named_threat = { threat = 3 name = GER_demand_memel_threat }
			if = {
				limit = {
					LIT = { owns_state = 188 }
				}
				LIT = {
					country_event = { id = baltic.4 }
				}
			}
		}
	}

	GER_danzig_or_war = {
		icon = ger_reichskommissariats
		fire_only_once = yes
	
		allowed = {
		   tag = GER
		}
		
		available = {
			has_completed_focus = GER_sieg_im_westen 
			has_army_manpower = { size > 999999 }
			has_capitulated = no
			OR = {
		    	AND = {
		        	is_ai = no
		    		date > 1939.6.1
		    	}
		    	AND = {
			    	is_ai = yes
			    	date > 1939.9.1
		    	}
			}		 
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			add_named_threat = { threat = 15 name = GER_danzig_or_war }
			POL = {
				country_event = { id = germany.86 }
				if = {
					limit = { NOT = { is_in_faction_with = ROOT } }
					custom_effect_tooltip = needs_approval
				}
			}
			add_timed_idea = {
				idea = GER_blitzkrieg
				days = 180
			}
			complete_national_focus = GER_fall_weiss			
		}
	}

	GER_weserubung = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		allowed = {
		   tag = GER
		}
		visible = {
			has_war = yes
		}

		available = {
			POL = {
				NOT = { controls_state = 85 }
				NOT = { controls_state = 10 }	
			}
			OR = { 
				has_war_with = ENG
				NOT = {country_exists = ENG}
			}
			OR = { 
				is_ai = no
				 date > 1940.4.1	  
			}	
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
		DEN = { remove_ideas = neutrality_idea }
		NOR = { remove_ideas = neutrality_idea }
			if = {
				limit = {
					NOT = { DEN = { is_in_faction_with = GER } }
					is_ai = no
					country_exists = DEN					
				} 
				create_wargoal = {
					type = annex_everything
					target = DEN
				}
			}


			if = {
				limit = {
					NOT = { NOR = { is_in_faction_with = GER } }
					is_ai = no
					country_exists = NOR					
				} 
				create_wargoal = {
					type = annex_everything
					target = NOR
				}
			}
			if = {
				limit = { is_ai = yes }
				declare_war_on = {
				target = DEN
				type = annex_everything
				}
	     	}
			if = {
				limit = { is_ai = yes }
				declare_war_on = {
				target = NOR
				type = annex_everything
				}
	     	}
			hidden_effect = {
				news_event = { hours = 6 id = news.233 }
			}	
		}
	}

	GER_sweden_treaty = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		visible = {
			NOT = { has_war_with = SWE }
			has_war = yes			
		}

		available = {
			NOT = { has_war_with = SWE }
			SWE = {
				custom_trigger_tooltip = {
					tooltip = GER_alone_or_peace_faction_tt
					is_alone_or_in_faction_at_peace_with_GER = yes
				}
			}
			OR = {
				OR = {
					GER = { controls_state = 37 }
					any_other_country = {
						is_in_faction_with = GER
						controls_state = 37
					}
				}
				OR = {
					GER = { controls_state = 99 }
					any_other_country = {
						is_in_faction_with = GER
						controls_state = 99
					}
				}
				is_in_faction_with = DEN
			}
			OR = {
				AND = {
					OR = {
						GER = { controls_state = 110 }
						any_other_country = {
							is_in_faction_with = GER
							controls_state = 110
						}
					}
					OR = {
						GER = { controls_state = 143 }
						any_other_country = {
							is_in_faction_with = GER
							controls_state = 143
						}
					}
					OR = {
						GER = { controls_state = 144 }
						any_other_country = {
							is_in_faction_with = GER
							controls_state = 144
						}
					}
				}	
				is_in_faction_with = NOR
			}
		}

		ai_will_do = {
			factor = 10
		}
		cost = 10
		complete_effect = {
			SWE = { 
			country_event = { id = germany.322 }
			custom_effect_tooltip = needs_approval
			}
		}
	}
	GER_finland_access = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		visible = {
			FIN = { has_completed_focus	 = FIN_abandoned }		
		}

		available = {
			FIN = { has_completed_focus	 = FIN_abandoned }
			date > 1941.1.1
		}

		ai_will_do = {
			factor = 10
		}
		cost = 10
		complete_effect = {
			SWE = { give_military_access = GER }
			FIN = { give_military_access = GER }
		}
	}

	GER_around_maginot = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		visible = {
			has_war = yes
		}

		available = {
			POL = {
				NOT = { controls_state = 85 }
				NOT = { controls_state = 10 }	
			}
			OR = { 
				has_war_with = ENG
				NOT = {country_exists = ENG}
			}
			OR = { 
				is_ai = no
				 date > 1940.5.15	  
			}						
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			BEL = { remove_ideas = neutrality_idea }
			HOL = { remove_ideas = HOL_aloof_neutrality }
			LUX = { remove_ideas = neutrality_idea }
			if = { 
				limit = { 
					NOT = { BEL = { is_in_faction_with = GER } }
					is_ai = no
				}
				create_wargoal = {
					type = annex_everything
					target = BEL
				}
			}
			if =  {
				limit = {
					NOT = { HOL = { is_in_faction_with = GER } }
					is_ai = no
				}
				create_wargoal = {
					type = annex_everything
					target = HOL
				}
			}
			if = {
				limit = {
					NOT = { LUX = { is_in_faction_with = GER } }
					is_ai = no
				}
				create_wargoal = {
					type = annex_everything
					target = LUX
				}			
			}
			if = {
				limit = { is_ai = yes }
				declare_war_on = {
				target = BEL
				type = annex_everything
				}
	     	}
			if = {
				limit = { is_ai = yes }
			    declare_war_on = {
	            target = HOL
	            type = annex_everything
				}
	     	}
			if = {
				limit = { is_ai = yes }
			    declare_war_on = {
	            target = LUX
	            type = annex_everything
         	   }
	     	}
			hidden_effect = {
				news_event = { hours = 6 id = news.234 }
			}
			complete_national_focus = GER_fall_gelb			
		}
	}

	GER_mol_rib_pact = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
	
		available = {
			NOT = { is_in_faction_with = POL }
			is_puppet = no
			has_army_manpower = { size > 949999 } 
			date > 1939.4.1	 	
			OR = { 
				is_ai = no
				date > 1939.8.15
			}				
			SOV = {
				NOT = { has_war_with = GER }
				country_exists = SOV
			}
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			SOV = {
				country_event = { id = germany.11 days = 1 }
				custom_effect_tooltip = GER_mol_rib_pact_tt
				custom_effect_tooltip = needs_approval
				complete_national_focus = SOV_a_deal_with_the_devil				
			}
		}
	}

	GER_ussr_war_goal = {

		icon = ger_reichskommissariats
	
		fire_only_once = yes

		allowed = {
		   tag = GER
		}

		available = {
		    date > 1941.5.15
			is_puppet = no
			has_army_manpower = { size > 1999999 } 
			is_neighbor_of = SOV
			OR = {
				POL = { has_capitulated = yes }
				POL = { is_in_faction_with = GER }
				POL = { is_in_faction_with = SOV }
			}
		}

		ai_will_do = {
			factor = 1000
		}

        days_remove = 14

		remove_effect = {
			complete_national_focus = GER_drang_nach_osten
			GER = {
			declare_war_on = {
				target = SOV
				type = annex_everything
			  }
		    }
			if = {
				limit = {
					GER = { is_in_faction_with = HUN }
				}
				HUN = {
				declare_war_on = {
				target = SOV
				type = annex_everything
			      }
			    }	
			}
			if = {
				limit = {
					GER = { is_in_faction_with = ROM }
				}
				ROM = {
				declare_war_on = {
				target = SOV
				type = annex_everything
			      }
			    }	
			}
			if = {
				limit = {
					GER = { is_in_faction_with = ITA }
				}
				ITA = {
				declare_war_on = {
				target = SOV
				type = annex_everything
			      }
			    }	
			}
			    add_timed_idea = {
				    idea = Barbarossa_I
				    days = 110
                }
			    add_timed_idea = {
			     	idea = Barbarossa_II
			     	days = 180
		     	}
				SOV = {
					add_ideas = SOV_surprise_strike
					add_ideas = Disorganized_Red_Army_1
					country_event = { id = soviet.46 days = 2 } 
				}
			if = {
				limit = {
					GER = { is_ai = yes }
					SOV = { is_ai = no }
				}
				SOV = {
				add_ideas = { SOV_surprise_strike_extra_for_ai }
			    }	
			}
			hidden_effect = {	
				every_other_country = { 
					limit = { NOT = { tag = SOV } NOT = { tag = GER } } 
					news_event = { hours = 6 id = news.3143 }
				}
				SOV = {
					diplomatic_relation = { country = ENG relation = non_aggression_pact }						
					diplomatic_relation = { country = FRA relation = non_aggression_pact }
					diplomatic_relation = { country = SAF relation = non_aggression_pact }
					diplomatic_relation = { country = CAN relation = non_aggression_pact }
					diplomatic_relation = { country = RAJ relation = non_aggression_pact }
					diplomatic_relation = { country = AST relation = non_aggression_pact }
					diplomatic_relation = { country = NZL relation = non_aggression_pact }
					diplomatic_relation = { country = PHI relation = non_aggression_pact }
					diplomatic_relation = { country = NOR relation = non_aggression_pact }
					diplomatic_relation = { country = SWE relation = non_aggression_pact }
					diplomatic_relation = { country = HOL relation = non_aggression_pact }
					diplomatic_relation = { country = BEL relation = non_aggression_pact }
					diplomatic_relation = { country = LUX relation = non_aggression_pact }
					diplomatic_relation = { country = YUG relation = non_aggression_pact }
					diplomatic_relation = { country = GRE relation = non_aggression_pact }
				}
			}
		}
	}			

	GER_integrate_war_economies = {
		icon = ger_reichskommissariats
		fire_only_once = yes
		cost = 25 

		allowed = {
		   tag = GER
		}
		visible = {
			has_war = yes
		}

		available = {
			OR = {
				HUN = {
					is_in_faction_with = ROOT
					is_free_or_subject_of_root = yes
				}
				ROM = {
					is_in_faction_with = ROOT
					is_free_or_subject_of_root = yes
				}
			}
			has_war = yes
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			every_state = {
				limit = { has_state_flag = GER_integrate_war_economies_1 }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			every_state = {
				limit = { has_state_flag = GER_integrate_war_economies_2 }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			HUN = {
				every_state = {
					limit = { has_state_flag = GER_integrate_war_economies_1 }
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
				every_state = {
					limit = { has_state_flag = GER_integrate_war_economies_2 }
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			ROM = {
				every_state = {
					limit = { has_state_flag = GER_integrate_war_economies_1 }
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
				every_state = {
					limit = { has_state_flag = GER_integrate_war_economies_2 }
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
		}

		remove_effect = {
			
			if = {
				limit = {
					NOT = { is_in_faction_with = HUN }
				}
				custom_effect_tooltip = GER_integrate_war_economies_tt
			}
			if = {
				limit = {
					NOT = { is_in_faction_with = ROM }
				}
				custom_effect_tooltip = GER_integrate_war_economies_tt2
			}
			if = {
				limit = {
					HUN = {
						is_in_faction_with = GER
						is_free_or_subject_of_root = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
					set_state_flag = GER_integrate_war_economies_1
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
					set_state_flag = GER_integrate_war_economies_2
				}
			}
			if = {
				limit = {
					ROM = {
						is_in_faction_with = GER
						is_free_or_subject_of_root = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
					set_state_flag = GER_integrate_war_economies_1
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
					set_state_flag = GER_integrate_war_economies_2
				}
			}
			if = {
				limit = {
					HUN = {
						is_in_faction_with = GER
						is_free_or_subject_of_root = yes
					}
				}
				HUN = {
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 1
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 2
						add_building_construction = {
							type = arms_factory
							level = 2
							instant_build = yes
						}
						set_state_flag = GER_integrate_war_economies_1
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 1
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 2
						add_building_construction = {
							type = arms_factory
							level = 2
							instant_build = yes
						}
						set_state_flag = GER_integrate_war_economies_2
					}
				}
			}
			if = {
				limit = {
					ROM = {
						is_in_faction_with = GER
						is_free_or_subject_of_root = yes
					}
				}
				ROM = {
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 1
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 2
						add_building_construction = {
							type = arms_factory
							level = 2
							instant_build = yes
						}
						set_state_flag = GER_integrate_war_economies_1
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 1
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 2
						add_building_construction = {
							type = arms_factory
							level = 2
							instant_build = yes
						}
						set_state_flag = GER_integrate_war_economies_2
					}
					country_event = { id = wtt_germany.7 days = 1 }
				}
			}
			if = {
				limit = {
					has_dlc = "Death or Dishonor" 
					HUN = {
						is_in_faction_with = GER
					}
					is_subject = no
				}
				GER = {
					set_autonomy = { target = HUN autonomy_state = autonomy_satellite }
				}
			}
			if = {
				limit = { 
					has_dlc = "Death or Dishonor" 
					ROM = {
						is_in_faction_with = GER
					}
					is_subject = no
				}
				GER = {
					set_autonomy = { target = ROM autonomy_state = autonomy_satellite }
				}
			}
			if = {
				limit = { 
					has_dlc = "Together for Victory"
					NOT = { has_dlc = "Death or Dishonor" } 
					HUN = {
						is_in_faction_with = GER
					}
					is_subject = no
				}
				GER = {
					set_autonomy = { target = HUN autonomy_state = autonomy_dominion }
				}
			}
			if = {
				limit = { 
					has_dlc = "Together for Victory" 
					NOT = { has_dlc = "Death or Dishonor" }
					ROM = {
						is_in_faction_with = GER
					}
					is_subject = no
				}
				GER = {
					set_autonomy = { target = ROM autonomy_state = autonomy_dominion }
				}
			}
			if = {
				limit = { 
					NOT = { has_dlc = "Together for Victory" }
					NOT = { has_dlc = "Death or Dishonor" }
					HUN = {
						is_in_faction_with = GER
					}
					is_subject = no
				}
				puppet = HUN
			}
			if = {
				limit = { 
					NOT = { has_dlc = "Together for Victory" }
					NOT = { has_dlc = "Death or Dishonor" }
					ROM = {
						is_in_faction_with = GER
					}
					is_subject = no
				}
				puppet = ROM
			}
		}
	}

	GER_romanian_oil = {

		icon = ger_reichskommissariats

		allowed = {
		   tag = GER
		}
		
		fire_only_once = yes
		
		available = {
			ROM = { is_in_faction_with = ROOT }
		}
		
		visible = {
			has_war = yes
		}
		cost = 50

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			ROM = {
				give_resource_rights = { receiver = GER state = 46 }
			}
		}
	}

	GER_secure_spain = {

		icon = ger_reichskommissariats

		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		available = {
			date > 1941.1.1
			SPR = { has_civil_war = no }
			SPR = { NOT = { has_government = fascism }
			}
			FRA = {
				OR = {
					NOT = { country_exists = THIS }
					has_capitulated = yes
					has_government = fascism
				}
			}
		}

		visible = {
			SPR = { has_civil_war = no }
			SPR = { NOT = { has_government = fascism }
			}
			FRA = {
				OR = {
					NOT = { country_exists = THIS }
					has_capitulated = yes
					has_government = fascism
				}
			}
		}

		cost = 25

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
		GER = {
				create_wargoal = {
				type = take_state
				target = SPR
				generator = { 41 }
				}
			}
			if = { limit = { NOT = { SOV = { has_government = fascism } }
			}
		    	SOV = {
		             add_opinion_modifier = { target = GER modifier = large_decrease }
	        	}
			}
			if = { limit = { NOT = { POR = { has_government = fascism } }
			}
		    	POR = {
		             add_opinion_modifier = { target = GER modifier = large_decrease }
	        	}
			}
		}
	}

	GER_befriend_nationalist_spain = {

		icon = ger_reichskommissariats
		
		fire_only_once = yes
		
		allowed = {
		   tag = GER
		}
		available = {
			date > 1941.1.1
			SPR = { has_civil_war = no }
			any_other_country = {
				original_tag = SPR
				has_government = fascism
				NOT = { has_war_with = GER }
			}
			FRA = {
				OR = {
					NOT = { country_exists = THIS }
					has_capitulated = yes
					has_government = fascism
				}
			}
		}

		visible = {
			SPR = { has_civil_war = no }
			any_other_country = {
				original_tag = SPR
				has_government = fascism
				NOT = { has_war_with = GER }
			}
			FRA = {
				OR = {
					NOT = { country_exists = THIS }
					has_capitulated = yes
					has_government = fascism
				}
			}
		}

		cost = 25

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
			random_country = {
				limit = {
					original_tag = SPR
					has_government = fascism
				}	
			country_event = { id = germany.301 days = 1 }
			}
		}
	}
}


#Category only allowed for GER
GER_military_buildup = {

	GER_plan_z = {

		icon = generic_naval

		available = {
			has_navy_size = {
				archetype = ship_hull_heavy
				size > 9
			}
			has_navy_size = {
				archetype = ship_hull_carrier
				size > 3
			}
			has_navy_size = {
				archetype = ship_hull_cruiser
				size > 29
			}
			has_navy_size = {
				archetype = ship_hull_light
				size > 99
			}
		}

		days_mission_timeout = 1800
		is_good = no
		fire_only_once = yes

		activation = {
			has_completed_focus = GER_naval_expansion
		}

		complete_effect = {
			add_war_support = 0.05
			navy_experience = 150
			add_stability = 0.2
			custom_effect_tooltip = GER_plan_z_tt_3
			hidden_effect = {
				add_resource = {
					type = oil
					amount = -7
					state = 59
				}
			}
		}	
	}

	GER_jaegernotprogramm = {

		icon = generic_air

		available = {
			has_war = yes
			AND = {
				has_deployed_air_force_size = {
					type = fighter
					size < 1501
				}
				has_equipment = {
					fighter_equipment < 1501
				}
			}
			NOT = {
				has_idea = GER_jaegernotprogramm
			}
		}
        fire_only_once = yes
		visible = {
			HUN = {
				is_ai = yes 
			}
			ROM = {
				is_ai = yes
			}
			has_war = yes
			AND = {
				has_deployed_air_force_size = {
					type = fighter
					size < 1501
				}
				has_equipment = {
					fighter_equipment < 1501
				}
			}
			NOT = {
				has_idea = GER_jaegernotprogramm
			}
		}

		cost = 25

		ai_will_do = {
			factor = 1
		}

		visible = {
			NOT = {
				has_idea = GER_jaegernotprogramm
			}
		}

		complete_effect = {
			add_timed_idea = { idea = GER_jaegernotprogramm days = 180 }
		}
	}

	GER_four_year_plan = { ### Don't build civs reeee 

		icon = generic_construction

		available = {
			arms_factory > 199
			synthetic_refinery > 11
			synthetic_rubber_refinery > 11
			has_army_size = {
			    size > 99
			    type = infantry
			}
			has_army_size = {
			    size > 11
			    type = armor
			}
			has_deployed_air_force_size = {
			    size > 3999
			    type = fighter
			}
			has_deployed_air_force_size = {
			    size > 1999
			    type = cas
			}
			has_deployed_air_force_size = {
			    size > 749
			    type = tactical_bomber
			}
		}

		days_mission_timeout = 1460
		fire_only_once = yes
		is_good = no

		cancel_trigger = {
			hidden_trigger = {
				has_war = yes
			}
		}

		activation = {
			has_completed_focus = GER_four_year_plan
		}

		visible = {
			has_completed_focus = GER_four_year_plan
		}

		timeout_effect = {
			add_stability = -0.2
			add_political_power = -150
			GER_remove_mefo_bills = yes
			add_ideas = GER_mefo_bills_ended
		}

		complete_effect = {
			set_technology = { 
				modern_blitzkrieg = 1
			} 			
			add_stability = 0.2
			add_political_power = 150
		}	
	}
}